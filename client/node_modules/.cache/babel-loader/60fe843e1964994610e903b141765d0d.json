{"ast":null,"code":"import { takeLatest, call, put, all } from 'redux-saga/effects';\nimport { userActionTypes } from './User.Types';\nimport { googleProvider, auth, createUserProfileDocument } from '../../Firebase/Firebase.Utils';\nimport { googleSignInFailed, googleSignInSuccess, emailPassWordSignInFailed, emailPassWordSignInSuccess } from './User.Action';\nexport function* onGoogleSignInStart() {\n  yield takeLatest(userActionTypes.LOGIN_WITH_GOOGLE_START, signInWithGoogle);\n}\nexport function* signInWithGoogle() {\n  try {\n    const {\n      user\n    } = yield auth.signInWithPopup(googleProvider);\n    const userRef = yield call(createUserProfileDocument, user);\n    const userSnapShopt = yield userRef.get();\n    yield put(signInSuccess({\n      id: userSnapShopt.id,\n      ...userSnapShopt.data()\n    }));\n  } catch (error) {\n    yield put(signInFailed(error));\n  }\n}\nexport function* onEmailPasswordSignInStart() {\n  yield takeLatest(userActionTypes.LOGIN_WITH_EMAIL_PASSWORD_START, emailPasswordSignIn);\n}\nexport function* emailPasswordSignIn({\n  payload: {\n    email,\n    password\n  }\n}) {\n  try {\n    const {\n      user\n    } = yield auth.signInWithEmailAndPassword(email, password);\n    const userRef = yield call(createUserProfileDocument, user);\n    const userSnapShopt = yield userRef.get();\n    yield put(SignInSuccess({\n      id: userSnapShopt.id,\n      ...userSnapShopt.data()\n    }));\n  } catch (error) {\n    yield put(SignInFailed(error));\n  }\n}\nexport function* userSaga() {\n  yield all([call(onGoogleSignInStart), call(onEmailPasswordSignInStart)]);\n}","map":{"version":3,"sources":["C:/Users/SEWA/Desktop/Udemy Courses/React/cwn-clothing/src/Redux/User/User.Sagas.js"],"names":["takeLatest","call","put","all","userActionTypes","googleProvider","auth","createUserProfileDocument","googleSignInFailed","googleSignInSuccess","emailPassWordSignInFailed","emailPassWordSignInSuccess","onGoogleSignInStart","LOGIN_WITH_GOOGLE_START","signInWithGoogle","user","signInWithPopup","userRef","userSnapShopt","get","signInSuccess","id","data","error","signInFailed","onEmailPasswordSignInStart","LOGIN_WITH_EMAIL_PASSWORD_START","emailPasswordSignIn","payload","email","password","signInWithEmailAndPassword","SignInSuccess","SignInFailed","userSaga"],"mappings":"AAAA,SAAQA,UAAR,EAAmBC,IAAnB,EAAwBC,GAAxB,EAA4BC,GAA5B,QAAsC,oBAAtC;AACA,SAASC,eAAT,QAAiC,cAAjC;AACA,SAASC,cAAT,EAAwBC,IAAxB,EAA6BC,yBAA7B,QAA8D,+BAA9D;AACA,SAASC,kBAAT,EAA6BC,mBAA7B,EACSC,yBADT,EACmCC,0BADnC,QACqE,eADrE;AAIA,OAAO,UAAUC,mBAAV,GAA+B;AAClC,QAAMZ,UAAU,CAACI,eAAe,CAACS,uBAAjB,EAAyCC,gBAAzC,CAAhB;AACH;AAED,OAAO,UAAUA,gBAAV,GAA4B;AAC/B,MAAI;AAEA,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMT,IAAI,CAACU,eAAL,CAAqBX,cAArB,CAAvB;AACA,UAAMY,OAAO,GAAG,MAAMhB,IAAI,CAACM,yBAAD,EAA2BQ,IAA3B,CAA1B;AACA,UAAMG,aAAa,GAAG,MAAMD,OAAO,CAACE,GAAR,EAA5B;AAEA,UAAMjB,GAAG,CAACkB,aAAa,CAAC;AAACC,MAAAA,EAAE,EAAEH,aAAa,CAACG,EAAnB;AAAsB,SAAGH,aAAa,CAACI,IAAd;AAAzB,KAAD,CAAd,CAAT;AAEH,GARD,CAQE,OAAOC,KAAP,EAAc;AACb,UAAMrB,GAAG,CAACsB,YAAY,CAACD,KAAD,CAAb,CAAT;AACF;AACJ;AAED,OAAO,UAAUE,0BAAV,GAAsC;AACzC,QAAMzB,UAAU,CAACI,eAAe,CAACsB,+BAAjB,EAAiDC,mBAAjD,CAAhB;AACH;AAED,OAAO,UAAUA,mBAAV,CAA8B;AAACC,EAAAA,OAAO,EAAC;AAACC,IAAAA,KAAD;AAAOC,IAAAA;AAAP;AAAT,CAA9B,EAAyD;AAC5D,MAAI;AAEA,UAAM;AAAEf,MAAAA;AAAF,QAAW,MAAMT,IAAI,CAACyB,0BAAL,CAAgCF,KAAhC,EAAuCC,QAAvC,CAAvB;AACA,UAAMb,OAAO,GAAG,MAAMhB,IAAI,CAACM,yBAAD,EAA2BQ,IAA3B,CAA1B;AACA,UAAMG,aAAa,GAAG,MAAMD,OAAO,CAACE,GAAR,EAA5B;AAEA,UAAMjB,GAAG,CAAC8B,aAAa,CAAC;AAACX,MAAAA,EAAE,EAAEH,aAAa,CAACG,EAAnB;AAAsB,SAAGH,aAAa,CAACI,IAAd;AAAzB,KAAD,CAAd,CAAT;AAEH,GARD,CAQE,OAAOC,KAAP,EAAc;AACb,UAAMrB,GAAG,CAAC+B,YAAY,CAACV,KAAD,CAAb,CAAT;AACF;AACJ;AAED,OAAO,UAAUW,QAAV,GAAoB;AACvB,QAAM/B,GAAG,CAAC,CAACF,IAAI,CAACW,mBAAD,CAAL,EAA2BX,IAAI,CAACwB,0BAAD,CAA/B,CAAD,CAAT;AACH","sourcesContent":["import {takeLatest,call,put,all} from 'redux-saga/effects';\r\nimport { userActionTypes }  from './User.Types';\r\nimport { googleProvider,auth,createUserProfileDocument } from '../../Firebase/Firebase.Utils';\r\nimport { googleSignInFailed, googleSignInSuccess,\r\n         emailPassWordSignInFailed,emailPassWordSignInSuccess } from './User.Action';\r\n\r\n\r\nexport function* onGoogleSignInStart(){\r\n    yield takeLatest(userActionTypes.LOGIN_WITH_GOOGLE_START,signInWithGoogle);\r\n}\r\n\r\nexport function* signInWithGoogle(){\r\n    try {\r\n\r\n        const { user } = yield auth.signInWithPopup(googleProvider);\r\n        const userRef = yield call(createUserProfileDocument,user);\r\n        const userSnapShopt = yield userRef.get();\r\n\r\n        yield put(signInSuccess({id: userSnapShopt.id,...userSnapShopt.data()}))\r\n\r\n    } catch (error) {\r\n       yield put(signInFailed(error));\r\n    }\r\n}\r\n\r\nexport function* onEmailPasswordSignInStart(){\r\n    yield takeLatest(userActionTypes.LOGIN_WITH_EMAIL_PASSWORD_START,emailPasswordSignIn);\r\n}\r\n\r\nexport function* emailPasswordSignIn({payload:{email,password}}){\r\n    try {\r\n\r\n        const { user } = yield auth.signInWithEmailAndPassword(email, password);\r\n        const userRef = yield call(createUserProfileDocument,user);\r\n        const userSnapShopt = yield userRef.get();\r\n\r\n        yield put(SignInSuccess({id: userSnapShopt.id,...userSnapShopt.data()}))\r\n\r\n    } catch (error) {\r\n       yield put(SignInFailed(error));\r\n    }\r\n}\r\n\r\nexport function* userSaga(){\r\n    yield all([call(onGoogleSignInStart),call(onEmailPasswordSignInStart)]);\r\n}"]},"metadata":{},"sourceType":"module"}