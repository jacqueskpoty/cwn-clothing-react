{"ast":null,"code":"import { takeLatest, call, put, all } from 'redux-saga/effects';\nimport { userActionTypes } from './User.Types';\nimport { googleProvider, auth, createUserProfileDocument } from '../../Firebase/Firebase.Utils';\nimport { signInFailed, signInSuccess } from './User.Action';\nexport function* onGoogleSignInStart() {\n  yield takeLatest(userActionTypes.LOGIN_WITH_GOOGLE_START, signInWithGoogle);\n}\n\nfunction* signIn(user) {\n  try {\n    const userRef = yield call(createUserProfileDocument, user);\n    const userSnapShopt = yield userRef.get();\n    yield put(signInSuccess({\n      id: userSnapShopt.id,\n      ...userSnapShopt.data()\n    }));\n  } catch (error) {\n    yield put(signInFailed(error));\n  }\n}\n\nexport function* signInWithGoogle() {\n  try {\n    const {\n      user\n    } = yield auth.signInWithPopup(googleProvider);\n    yield call(signIn, user);\n  } catch (error) {\n    yield put(signInFailed(error));\n  }\n}\nexport function* onEmailPasswordSignInStart() {\n  yield takeLatest(userActionTypes.LOGIN_WITH_EMAIL_PASSWORD_START, emailPasswordSignIn);\n}\nexport function* emailPasswordSignIn({\n  payload: {\n    email,\n    password\n  }\n}) {\n  try {\n    const {\n      user\n    } = yield auth.signInWithEmailAndPassword(email, password);\n    yield call(signIn, user);\n  } catch (error) {\n    yield put(signInFailed(error));\n  }\n}\nexport function* userSaga() {\n  yield all([call(onGoogleSignInStart), call(onEmailPasswordSignInStart)]);\n}","map":{"version":3,"sources":["C:/Users/SEWA/Desktop/Udemy Courses/React/cwn-clothing/src/Redux/User/User.Sagas.js"],"names":["takeLatest","call","put","all","userActionTypes","googleProvider","auth","createUserProfileDocument","signInFailed","signInSuccess","onGoogleSignInStart","LOGIN_WITH_GOOGLE_START","signInWithGoogle","signIn","user","userRef","userSnapShopt","get","id","data","error","signInWithPopup","onEmailPasswordSignInStart","LOGIN_WITH_EMAIL_PASSWORD_START","emailPasswordSignIn","payload","email","password","signInWithEmailAndPassword","userSaga"],"mappings":"AAAA,SAAQA,UAAR,EAAmBC,IAAnB,EAAwBC,GAAxB,EAA4BC,GAA5B,QAAsC,oBAAtC;AACA,SAASC,eAAT,QAAiC,cAAjC;AACA,SAASC,cAAT,EAAwBC,IAAxB,EAA6BC,yBAA7B,QAA8D,+BAA9D;AACA,SAASC,YAAT,EAAuBC,aAAvB,QAA4C,eAA5C;AAGA,OAAO,UAAUC,mBAAV,GAA+B;AAClC,QAAMV,UAAU,CAACI,eAAe,CAACO,uBAAjB,EAAyCC,gBAAzC,CAAhB;AACH;;AAED,UAAWC,MAAX,CAAkBC,IAAlB,EAAuB;AACnB,MAAI;AACA,UAAMC,OAAO,GAAG,MAAMd,IAAI,CAACM,yBAAD,EAA2BO,IAA3B,CAA1B;AACA,UAAME,aAAa,GAAG,MAAMD,OAAO,CAACE,GAAR,EAA5B;AAEA,UAAMf,GAAG,CAACO,aAAa,CAAC;AAACS,MAAAA,EAAE,EAAEF,aAAa,CAACE,EAAnB;AAAsB,SAAGF,aAAa,CAACG,IAAd;AAAzB,KAAD,CAAd,CAAT;AAEH,GAND,CAME,OAAOC,KAAP,EAAc;AACb,UAAMlB,GAAG,CAACM,YAAY,CAACY,KAAD,CAAb,CAAT;AACF;AACJ;;AAED,OAAO,UAAUR,gBAAV,GAA4B;AAC/B,MAAI;AAEA,UAAM;AAAEE,MAAAA;AAAF,QAAW,MAAMR,IAAI,CAACe,eAAL,CAAqBhB,cAArB,CAAvB;AACA,UAAMJ,IAAI,CAACY,MAAD,EAAQC,IAAR,CAAV;AAEH,GALD,CAKE,OAAOM,KAAP,EAAc;AACb,UAAMlB,GAAG,CAACM,YAAY,CAACY,KAAD,CAAb,CAAT;AACF;AACJ;AAED,OAAO,UAAUE,0BAAV,GAAsC;AACzC,QAAMtB,UAAU,CAACI,eAAe,CAACmB,+BAAjB,EAAiDC,mBAAjD,CAAhB;AACH;AAED,OAAO,UAAUA,mBAAV,CAA8B;AAACC,EAAAA,OAAO,EAAC;AAACC,IAAAA,KAAD;AAAOC,IAAAA;AAAP;AAAT,CAA9B,EAAyD;AAC5D,MAAI;AAEA,UAAM;AAAEb,MAAAA;AAAF,QAAW,MAAMR,IAAI,CAACsB,0BAAL,CAAgCF,KAAhC,EAAuCC,QAAvC,CAAvB;AACA,UAAM1B,IAAI,CAACY,MAAD,EAAQC,IAAR,CAAV;AAEH,GALD,CAKE,OAAOM,KAAP,EAAc;AACb,UAAMlB,GAAG,CAACM,YAAY,CAACY,KAAD,CAAb,CAAT;AACF;AACJ;AAED,OAAO,UAAUS,QAAV,GAAoB;AACvB,QAAM1B,GAAG,CAAC,CAACF,IAAI,CAACS,mBAAD,CAAL,EAA2BT,IAAI,CAACqB,0BAAD,CAA/B,CAAD,CAAT;AACH","sourcesContent":["import {takeLatest,call,put,all} from 'redux-saga/effects';\r\nimport { userActionTypes }  from './User.Types';\r\nimport { googleProvider,auth,createUserProfileDocument } from '../../Firebase/Firebase.Utils';\r\nimport { signInFailed, signInSuccess } from './User.Action';\r\n\r\n\r\nexport function* onGoogleSignInStart(){\r\n    yield takeLatest(userActionTypes.LOGIN_WITH_GOOGLE_START,signInWithGoogle);\r\n}\r\n\r\nfunction*  signIn(user){\r\n    try {\r\n        const userRef = yield call(createUserProfileDocument,user);\r\n        const userSnapShopt = yield userRef.get();\r\n\r\n        yield put(signInSuccess({id: userSnapShopt.id,...userSnapShopt.data()}))\r\n\r\n    } catch (error) {\r\n       yield put(signInFailed(error));\r\n    }\r\n}\r\n\r\nexport function* signInWithGoogle(){\r\n    try {\r\n\r\n        const { user } = yield auth.signInWithPopup(googleProvider);\r\n        yield call(signIn,user);\r\n\r\n    } catch (error) {\r\n       yield put(signInFailed(error));\r\n    }\r\n}\r\n\r\nexport function* onEmailPasswordSignInStart(){\r\n    yield takeLatest(userActionTypes.LOGIN_WITH_EMAIL_PASSWORD_START,emailPasswordSignIn);\r\n}\r\n\r\nexport function* emailPasswordSignIn({payload:{email,password}}){\r\n    try {\r\n\r\n        const { user } = yield auth.signInWithEmailAndPassword(email, password);\r\n        yield call(signIn,user);\r\n\r\n    } catch (error) {\r\n       yield put(signInFailed(error));\r\n    }\r\n}\r\n\r\nexport function* userSaga(){\r\n    yield all([call(onGoogleSignInStart),call(onEmailPasswordSignInStart)]);\r\n}"]},"metadata":{},"sourceType":"module"}