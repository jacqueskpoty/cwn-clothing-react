{"ast":null,"code":"import { takeLatest, call, put, all } from 'redux-saga/effects';\nimport { userActionTypes } from './User.Types';\nimport { googleProvider, auth, createUserProfileDocument } from '../../Firebase/Firebase.Utils';\nimport { googleSignInFailed, googleSignInSuccess, emailPassWordSignInFailed, emailPassWordSignInSuccess } from './User.Action';\nexport function* onGoogleSignInStart() {\n  yield takeLatest(userActionTypes.LOGIN_WITH_GOOGLE_START, signInWithGoogle);\n}\nexport function* signInWithGoogle() {\n  try {\n    const {\n      user\n    } = yield auth.signInWithPopup(googleProvider);\n    const userRef = yield call(createUserProfileDocument, user);\n    const userSnapShopt = yield userRef.get();\n    yield put(googleSignInSuccess({\n      id: userSnapShopt.id,\n      ...userSnapShopt.data()\n    }));\n  } catch (error) {\n    yield put(googleSignInFailed(error));\n  }\n}\nexport function* onEmailPasswordSignInStart() {\n  yield takeLatest(userActionTypes.LOGIN_WITH_EMAIL_PASSWORD_START, emailPasswordSignIn);\n}\nexport function* emailPasswordSignIn({\n  email,\n  password\n}) {\n  try {\n    const {\n      user\n    } = yield auth.signInWithEmailAndPassword(email, password);\n    const userRef = yield call(createUserProfileDocument, user);\n    const userSnapShopt = yield userRef.get();\n    yield put(emailPassWordSignInSuccess({\n      id: userSnapShopt.id,\n      ...userSnapShopt.data()\n    }));\n  } catch (error) {\n    yield put(googleSignInFailed(error));\n  }\n}\nexport function* userSaga() {\n  yield all([call(onGoogleSignInStart), call(onEmailPasswordSignInStart)]);\n}","map":{"version":3,"sources":["C:/Users/SEWA/Desktop/Udemy Courses/React/cwn-clothing/src/Redux/User/User.Sagas.js"],"names":["takeLatest","call","put","all","userActionTypes","googleProvider","auth","createUserProfileDocument","googleSignInFailed","googleSignInSuccess","emailPassWordSignInFailed","emailPassWordSignInSuccess","onGoogleSignInStart","LOGIN_WITH_GOOGLE_START","signInWithGoogle","user","signInWithPopup","userRef","userSnapShopt","get","id","data","error","onEmailPasswordSignInStart","LOGIN_WITH_EMAIL_PASSWORD_START","emailPasswordSignIn","email","password","signInWithEmailAndPassword","userSaga"],"mappings":"AAAA,SAAQA,UAAR,EAAmBC,IAAnB,EAAwBC,GAAxB,EAA4BC,GAA5B,QAAsC,oBAAtC;AACA,SAASC,eAAT,QAAiC,cAAjC;AACA,SAASC,cAAT,EAAwBC,IAAxB,EAA6BC,yBAA7B,QAA8D,+BAA9D;AACA,SAASC,kBAAT,EAA6BC,mBAA7B,EACSC,yBADT,EACmCC,0BADnC,QACqE,eADrE;AAIA,OAAO,UAAUC,mBAAV,GAA+B;AAClC,QAAMZ,UAAU,CAACI,eAAe,CAACS,uBAAjB,EAAyCC,gBAAzC,CAAhB;AACH;AAED,OAAO,UAAUA,gBAAV,GAA4B;AAC/B,MAAI;AAEA,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMT,IAAI,CAACU,eAAL,CAAqBX,cAArB,CAAvB;AACA,UAAMY,OAAO,GAAG,MAAMhB,IAAI,CAACM,yBAAD,EAA2BQ,IAA3B,CAA1B;AACA,UAAMG,aAAa,GAAG,MAAMD,OAAO,CAACE,GAAR,EAA5B;AAEA,UAAMjB,GAAG,CAACO,mBAAmB,CAAC;AAACW,MAAAA,EAAE,EAAEF,aAAa,CAACE,EAAnB;AAAsB,SAAGF,aAAa,CAACG,IAAd;AAAzB,KAAD,CAApB,CAAT;AAEH,GARD,CAQE,OAAOC,KAAP,EAAc;AACb,UAAMpB,GAAG,CAACM,kBAAkB,CAACc,KAAD,CAAnB,CAAT;AACF;AACJ;AAED,OAAO,UAAUC,0BAAV,GAAsC;AACzC,QAAMvB,UAAU,CAACI,eAAe,CAACoB,+BAAjB,EAAiDC,mBAAjD,CAAhB;AACH;AAED,OAAO,UAAUA,mBAAV,CAA8B;AAACC,EAAAA,KAAD;AAAOC,EAAAA;AAAP,CAA9B,EAA+C;AAClD,MAAI;AAEA,UAAM;AAAEZ,MAAAA;AAAF,QAAW,MAAMT,IAAI,CAACsB,0BAAL,CAAgCF,KAAhC,EAAuCC,QAAvC,CAAvB;AACA,UAAMV,OAAO,GAAG,MAAMhB,IAAI,CAACM,yBAAD,EAA2BQ,IAA3B,CAA1B;AACA,UAAMG,aAAa,GAAG,MAAMD,OAAO,CAACE,GAAR,EAA5B;AAEA,UAAMjB,GAAG,CAACS,0BAA0B,CAAC;AAACS,MAAAA,EAAE,EAAEF,aAAa,CAACE,EAAnB;AAAsB,SAAGF,aAAa,CAACG,IAAd;AAAzB,KAAD,CAA3B,CAAT;AAEH,GARD,CAQE,OAAOC,KAAP,EAAc;AACb,UAAMpB,GAAG,CAACM,kBAAkB,CAACc,KAAD,CAAnB,CAAT;AACF;AACJ;AAED,OAAO,UAAUO,QAAV,GAAoB;AACvB,QAAM1B,GAAG,CAAC,CAACF,IAAI,CAACW,mBAAD,CAAL,EAA2BX,IAAI,CAACsB,0BAAD,CAA/B,CAAD,CAAT;AACH","sourcesContent":["import {takeLatest,call,put,all} from 'redux-saga/effects';\r\nimport { userActionTypes }  from './User.Types';\r\nimport { googleProvider,auth,createUserProfileDocument } from '../../Firebase/Firebase.Utils';\r\nimport { googleSignInFailed, googleSignInSuccess,\r\n         emailPassWordSignInFailed,emailPassWordSignInSuccess } from './User.Action';\r\n\r\n\r\nexport function* onGoogleSignInStart(){\r\n    yield takeLatest(userActionTypes.LOGIN_WITH_GOOGLE_START,signInWithGoogle);\r\n}\r\n\r\nexport function* signInWithGoogle(){\r\n    try {\r\n\r\n        const { user } = yield auth.signInWithPopup(googleProvider);\r\n        const userRef = yield call(createUserProfileDocument,user);\r\n        const userSnapShopt = yield userRef.get();\r\n\r\n        yield put(googleSignInSuccess({id: userSnapShopt.id,...userSnapShopt.data()}))\r\n\r\n    } catch (error) {\r\n       yield put(googleSignInFailed(error));\r\n    }\r\n}\r\n\r\nexport function* onEmailPasswordSignInStart(){\r\n    yield takeLatest(userActionTypes.LOGIN_WITH_EMAIL_PASSWORD_START,emailPasswordSignIn);\r\n}\r\n\r\nexport function* emailPasswordSignIn({email,password}){\r\n    try {\r\n\r\n        const { user } = yield auth.signInWithEmailAndPassword(email, password);\r\n        const userRef = yield call(createUserProfileDocument,user);\r\n        const userSnapShopt = yield userRef.get();\r\n\r\n        yield put(emailPassWordSignInSuccess({id: userSnapShopt.id,...userSnapShopt.data()}))\r\n\r\n    } catch (error) {\r\n       yield put(googleSignInFailed(error));\r\n    }\r\n}\r\n\r\nexport function* userSaga(){\r\n    yield all([call(onGoogleSignInStart),call(onEmailPasswordSignInStart)]);\r\n}"]},"metadata":{},"sourceType":"module"}